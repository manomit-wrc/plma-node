{{#content "style" mode="prepend"}}
<link rel="stylesheet" type="text/css" href="/assets/css/dataTables.bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/assets/css/select2.min.css">
<link rel="stylesheet" type="text/css" href="/assets/css/bootstrap-datetimepicker.min.css"> {{/content}}

<div class="page-wrapper">
    <div class="content container-fluid">
        <div class="tcr-view">
            <div class="card-box">
                <div class="info">
                    <div class="row">
                        <div class="col-sm-8">
                        </div>

                        <div class="col-sm-4">
                            <div class="text-right">
                                <a href="/target/edit/{{client.id}}" class="btn btn-primary pull-right rounded">
                                    <i class="fa fa-pencil"></i> Edit Target</a>
                                
                                <a href="/target" class="btn btn-primary pull-right rounded m-r-5">
                                    <i class="fa fa-arrow-left"></i>Back</a>
                            </div>
                        </div>


                    </div>
                    <div class="text-center top-desc">
                        <img src="https://cdn1.iconfinder.com/data/icons/flat-business-icons/128/user-512.png" alt="" height="100" width="100">
                        <h4>
                             {{client.first_name}} {{client.last_name}}
                        </h4>
                        <h6>{{client.email}}</h6>
                    </div>

                    <div class="info-tile">
                        <div class="container">

                            <div class="row">
                                <div class="col-md-3 border-divider">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <img src="https://cdn3.iconfinder.com/data/icons/black-white-social-media/32/logo_social_media_location-512.png" alt="" height="48"
                                                width="48">
                                        </div>
                                        <div class="col-xs-9">
                                            <p>
                                                {{client.address1}},{{client.address3}},{{client.address3}},
                                                <br> {{state.name}}, {{city.name}},
                                                <br> {{zipcode.zip}}, {{country.name}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 border-divider">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <img src="https://cdn3.iconfinder.com/data/icons/black-white-social-media/32/logo_social_media_phone-2-512.png" alt="" height="48"
                                                width="48">
                                        </div>
                                        <div class="col-xs-9">
                                            <p class="number_validator">
                                                {{client.mobile_no}}
                                            </p>
                                            <p class="number_validator">
                                                {{client.phone_no}}
                                            </p>
                                            <p class="number_validator">
                                                {{client.fax}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 border-divider">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <img src="https://cdn4.iconfinder.com/data/icons/e-commerce-icon-set/48/Username_2-512.png" alt="" height="48" width="48">
                                        </div>
                                        <div class="col-xs-9">
                                            {{#if_eq client.target_type "O"}}
                                                <p>Organization</p>
                                            {{else}}
                                                <p>Individual</p>
                                            {{/if_eq}}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <img src="https://cdn3.iconfinder.com/data/icons/google-material-design-icons/48/ic_group_work_48px-512.png" alt="" height="48"
                                                width="48">
                                        </div>
                                        <div class="col-xs-9">
                                            <p>
                                                Total Activity: {{count_activity}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            {{!-- Starts Info Tabs --}}
            <div class="card-box tab-box">
                <div class="row user-tabs">
                    <div class="col-lg-12 col-md-12 col-sm-12 line-tabs">
                        <ul class="nav nav-tabs tabs nav-tabs-bottom">
                            <li class="active col-sm-4">
                                <a data-toggle="tab" href="#activities">Activities</a>
                            </li>
                            <li class="col-sm-4">
                                <a data-toggle="tab" href="#refferedinfo">Revenue Information</a>
                            </li>
                            <li class="col-sm-4">
                                <a data-toggle="tab" href="#otherinfo">Other Information</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="tab-content  profile-tab-content">
                            <div id="activities" class="tab-pane fade in active">
                                <div class="card-box">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="table-responsive">
                                                <table class="table table-striped custom-table datatable">
                                                    <thead>
                                                        <tr>
                                                            <th>SL#</th>
                                                            <th>Activity Name</th>
                                                            <th>From Date</th>
                                                            <th>To Date</th>
                                                            <th>Remarks</th>
                                                            <th>Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {{#each activity_details}}
                                                        <tr>
                                                            <td>{{math @index "+" 1}}</td>
                                                            <td>
                                                                <a href="/activity/view/{{this.activity.id}}" id="setUrlItem">{{this.activity.activity_name}}</a>
                                                            </td>
                                                            <td>{{dateFormat this.activity.activity_from_date "DD-MM-YYYY"}}</td>
                                                            <td>{{dateFormat this.activity.activity_to_date "DD-MM-YYYY"}}</td>
                                                            <td>{{this.activity.remarks}}</td>
                                                            <td> {{#if_eq this.activity.activity_status '0'}} NEW ACTIVITY - CREATED {{/if_eq}} {{#if_eq this.activity.activity_status
                                                                '1'}} PENDING APPROVAL - IN-PROGRESS {{/if_eq}} {{#if_eq this.activity.activity_status '2'}}
                                                                APPROVED - PROCEED {{/if_eq}} {{#if_eq this.activity.activity_status '3'}} NOT APPROVED - DISCARD
                                                                ACTIVITY {{/if_eq}}
                                                            </td>
                                                        </tr>
                                                        {{/each}}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="refferedinfo" class="tab-pane fade">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <ul class="personal-info other-info">
                                                <li>
                                                    <span class="title">Life Time Revenue:</span>
                                                    <span class="text revenue_cost">{{client.estimated_lifetime_value}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Close Date:</span>
                                                    <span class="text">{{dateFormat client.close_date " DD-MM-YYYY "}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Planning Period:</span>
                                                    <span class="text">{{client.revenues.0.planning_period}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Start Date:</span>
                                                    <span class="text">{{dateFormat client.revenues.0.start_date " DD-MM-YYYY "}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">End Date:</span>
                                                    <span class="text">{{dateFormat client.revenues.0.end_date " DD-MM-YYYY "}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Estimated Planning Period Revenue:</span>
                                                    <span class="text revenue_cost">{{client.revenues.0.estimated_revenue}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Current Revenue:</span>
                                                    <span class="text revenue_cost">{{client.revenues.0.current_revenue}}</span>
                                                </li>
                                                
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="otherinfo" class="tab-pane fade">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <ul class="personal-info other-info">
                                                
                                                <li>
                                                    <span class="title">Gender:</span>
                                                    <span class="text">
                                                        {{#if_eq client.gender "M"}}
                                                            Male
                                                        {{else}}
                                                            Female
                                                        {{/if_eq}}
                                                    </span>
                                                </li>
                                                <li>
                                                    <span class="title">Target Company:</span>
                                                    <span class="text">{{client.company_name}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">IM:</span>
                                                    <span class="text">{{client.im}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Website URL:</span>
                                                    <span class="text">{{client.website_url}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Social URL:</span>
                                                    <span class="text">{{client.social_url}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Twitter:</span>
                                                    <span class="text">{{client.twitter}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Linkedin:</span>
                                                    <span class="text">{{client.linkedin}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Google:</span>
                                                    <span class="text">{{client.google}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Youtube:</span>
                                                    <span class="text">{{client.youtube}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Association Status:</span>
                                                    <span class="text">{{client.association}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Industry Type:</span>
                                                    <span class="text">{{industrys.industry_name}}</span>
                                                </li>
                                                <li>
                                                    <span class="title">Remarks:</span>
                                                    <span class="text">{{client.remarks}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{!-- Ends Info Tabs --}}
        </div>
    </div>

</div>

{{#content "script" mode="append"}}
<script type="text/javascript" src="/assets/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/assets/js/dataTables.bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/js/select2.min.js"></script>
<script type="text/javascript" src="/assets/js/moment.min.js"></script>
<script type="text/javascript" src="/assets/js/bootstrap-datetimepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/additional-methods.min.js"></script>
<script type="text/javascript">
    $(document).on('click', "#setUrlItem", function () {
            localStorage.removeItem('url');
            localStorage.setItem("url", window.location.pathname);
        });

        $(document).on('click', '#expandBtn', function(){
            $("#expandToggle").toggle();
            $("i", this).toggleClass("fa fa-arrow-up fa fa-arrow-down");
        });

        $(".revenue_cost").inputmask("numeric", {
			radixPoint: ".",
			groupSeparator: ",",
			digits: 2,
			autoGroup: true,
			prefix: '$ ',
			rightAlign: false
		});

		$("#estimatedLifetime").inputmask("numeric", {
			radixPoint: ".",
			groupSeparator: ",",
			digits: 2,
			autoGroup: true,
			prefix: '$ ',
			rightAlign: false
		});

    $(document).ready(function (e) {
        $("#targetform").validate({
            rules: {
                edit_target_first_name: {
                    required: true
                },
                edit_target_last_name: {
                    required: true
                },
                org_name: {
                    required: true
                },
                org_id: {
                    required: true
                },
                org_code: {
                    required: true
                },
                email: {
                    required: true,
                    email: true
                },
                mobile_no: {
                    required: true
                },
                fax: {
                    required: true
                },
                address1: {
                    required: true
                },
                country: {
                    required: true
                },
                state: {
                    required: true
                },
                city: {
                    required: true
                },
                zipcode: {
                    required: true
                }
            },
            messages: {
                edit_target_first_name: {
                    required: "First Name can't be blank"
                },
                edit_target_last_name: {
                    required: "Last name  title can't be blank"
                },
                org_name: {
                    required: "Organisation Name can't be blank"
                },
                org_id: {
                    required: "Organisation ID can't be blank"
                },
                org_code: {
                    required: "Organisation code can't be blank"
                },
                email: {
                    required: "Email id can't be blank",
                    email: "Enter valid email id"
                },
                mobile_no: {
                    required: "Mobile number can't blank"
                },
                fax: {
                    required: "Fax can't be blank"
                },
                address1: {
                    required: "Must provide address"
                },
                country: {
                    required: "Choose your country"
                },
                state: {
                    required: "Choose your state"
                },
                city: {
                    required: "Choose your city"
                },
                zipcode: {
                    required: "Choose your zipcode"
                }
            }
        });

        // add designation ajax operation and form validation ends

        //hide show type
		let _msType = $('#_targetContact').val();
		if (_msType==='O') {
			$('#org_type').show();
			$('#indivisual_type').hide();
			$('#m_s_contactInformation').show();
		} else {
			$('#org_type').hide();
			$('#indivisual_type').show();
			$('#m_s_contactInformation').hide();
		}

    });
</script> {{/content}}
