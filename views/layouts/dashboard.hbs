<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
  <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico">
  <title>Perform Law - Dashboard</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/assets/plugins/morris/morris.css">
  {{#block "style"}}
  <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
  {{/block}}
		<!--[if lt IE 9]>
			<script src="/assets/js/html5shiv.min.js"></script>
			<script src="/assets/js/respond.min.js"></script>
		<![endif]-->
  </head>
  <body>
    <div class="main-wrapper">

      {{> header}}
      {{> sidebar}}

      {{{body}}}
    </div>
    <div class="sidebar-overlay" data-reff="#sidebar"></div>
    {{#block "script"}}
    <script type="text/javascript" src="/assets/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.slimscroll.js"></script>
    <script type="text/javascript" src="/assets/plugins/morris/morris.min.js"></script>
    <script type="text/javascript" src="/assets/plugins/raphael/raphael-min.js"></script>
    <script type="text/javascript" src="/assets/js/app.js"></script>
    <script src="/assets/input-mask/jquery.inputmask.bundle.min.js" type="text/javascript"></script>
    <script type="text/javascript">

    $('.url_selector').keyup(function(){
      if (($(this).val().substr(0,7) !== 'http://') || ($(this).val() === '')) {
        $(this).val('http://');
      }
    });


    $(document).ready(function() {
      $(".number_validator").inputmask("mask", {
        "mask": "(999) 999-9999"
      });

      $(".alert").fadeTo(2000, 500).slideUp(500, function(){
        $(".alert").slideUp(500);
      });

      $("#state").change(function(e){
        var state_id = $(this).val();
        $("#city").find('option').not(':first').remove();
        if(state_id){
          $.ajax({
            type: "POST",
            url:"/firm-profiles/get-city",
            data:{state_id:state_id},
            success:function(response){
             for(var i=0;i<response.get_city.length;i++) {
              $("#city").append('<option value="'+response.get_city[i].id+'">'+response.get_city[i].name+'</option>');
            }
          },
          error:function(xhr){

          }
        });
        }
      });

      $("#city").change(function(e){
        var city_name = $("#city option:selected").text();
        $("#zipcode").find('option').not(':first').remove();
        if(city_name){
          $.ajax({
            type: "POST",
            url:"/firm-profiles/get-zipcode",
            data:{city_name:city_name},
            success:function(response){
              for(var i=0;i<response.zipcode.length;i++) {
                console.log(response.zipcode[i]);
                $("#zipcode").append('<option value="'+response.zipcode[i].id+'">'+response.zipcode[i].zip+'</option>');
              }
            },
            error:function(xhr){

            }
          });
        }
      });
    });
    </script>
    {{/block}}
  </body>
  </html>
